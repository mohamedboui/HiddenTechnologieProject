/*! angular-bootstrap-lightbox-no-bar */
angular.module("bootstrapLightbox",["ui.bootstrap"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout",function(a,b,c){var d=!1,e=[],f=0,g={};g.templateUrl=this.templateUrl,g.calculateImageDimensionLimits=this.calculateImageDimensionLimits,g.calculateModalDimensions=this.calculateModalDimensions,g.openModal=function(a,c){e=a,f=c,g.image=e[f],b.open({templateUrl:g.templateUrl,controller:["$scope",function(a){a.Lightbox=g,d=!0}],windowClass:"lightbox-modal"}).result.finally(function(){d=!1})};var h=function(a){f=a,g.image=e[f]};return g.firstImage=function(){h(0)},g.prevImage=function(){h((f-1+e.length)%e.length)},g.nextImage=function(){h((f+1)%e.length)},g.lastImage=function(){h(e.length-1)},g.setImages=function(a){e=a,g.image=e[f]},a.bind("keydown",function(a){if(d)switch(a.which){case 39:return c(function(){g.nextImage()}),!1;case 37:return c(function(){g.prevImage()}),!1}}),g}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){var c=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h,height:i}};return{link:function(d,e,f){var g=function(){var f=a.innerWidth,g=a.innerHeight,h=d.Lightbox.image.width,i=d.Lightbox.image.height,j=b.calculateImageDimensionLimits({windowWidth:f,windowHeight:g,imageWidth:h,imageHeight:i}),k=c(angular.extend({width:h,height:i,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},j)),l=b.calculateModalDimensions({windowWidth:f,windowHeight:g,imageDisplayWidth:k.width,imageDisplayHeight:k.height});e.css({width:k.width+"px",height:k.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:l.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:l.height+"px"})};d.$watch(function(){return f.lightboxSrc},function(a){img=new Image,img.src=a,img.onload=function(){e[0].src="//:0",g(),e[0].src=a}}),angular.element(a).on("resize",g)}}}]);